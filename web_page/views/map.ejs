<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Google Map</title>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyALuNZjv26aWboIy9FpbHDZNmVkwSjFM8U&callback=initMap" async defer></script>
        </head>
        <body>
            <div id="map" style="height: 500px;"></div>
            <script>
                function initMap() {
                    const map = new google.maps.Map(document.getElementById("map"), {
                        center: { lat: <%= parseFloat(coords[0].lat) %>, lng: <%= parseFloat(coords[0].lon) %> }, // 첫 번째 좌표를 중심으로 설정
                        zoom: 14, // 초기 줌 레벨
                    });
        
                    const bounds = new google.maps.LatLngBounds();
                    const infoWindow = new google.maps.InfoWindow();
        
                    const markers = []; // 모든 마커를 저장할 배열
        
                    <% for(const c of coords) { %>
                        const marker = new google.maps.Marker({
                            position: { lat: <%= parseFloat(c.lat) %>, lng: <%= parseFloat(c.lon) %> },
                            map: map
                        });
                        bounds.extend(marker.position);
        
                        marker.addListener("click", () => {
                            map.panTo(marker.position);
                            infoWindow.setContent(`위도: <%= c.lat %>, 경도: <%= c.lon %>`);
                            infoWindow.open({
                                anchor: marker,
                                map
                            });
                        });
        
                        markers.push(marker); // 마커를 배열에 추가
                    <% } %>
        
                    // 모든 마커가 표시될 수 있도록 지도 확대/축소 설정
                    map.fitBounds(bounds);
                }
            </script>
        </body>
        </html>
        
